/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/aanjs@2.0.0/lib/aan.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";let cursorX,cursorY,map=(t,i,e,a,h)=>a+(t-i)/(e-i)*(h-a);function determine_of_y(t,i){let e,a,h,l=1e-10,s=!0;for(e=i>Math.abs(t)?i:Math.abs(t);s;)0==Math.floor(e/l)?s=!1:l*=10;return e<=.5*l&&e>.2*l?l*=.5:e<=.2*l&&e>.1*l?l*=.2:e<=.1*l&&(l*=.1),t<0?(a=-1*l,h=Math.abs(l-a)):(a=0,h=Math.abs(l)),[a,l,h]}document.onmousemove=function(t){cursorX=t.pageX,cursorY=t.pageY};let getMousePos=t=>{let i=t.getBoundingClientRect();return{x:cursorX-i.left,y:cursorY-i.top}},Aan=function(t){this.ctx=t.getContext("2d"),this.elem=t,this.action,this.longest_of_data,this.data={}};Aan.prototype.update=function(t){t(this.data),this.action()},Aan.prototype.draw=function(t){"object"!=typeof t&&console.error("parameter must be object");let i=this.elem,e=this.ctx,a=window.innerHeight,h=i.height,l=.9*i.width-.1*i.width,s=.95*l,o=(l-s)/2,n=!0;t.setting&&(n=!t.setting.disableAnim),this.data.Yaxis=t.Yaxis,t.Xaxis&&(this.data.Xaxis=t.Xaxis);let d=()=>{let i=[];for(let t of this.data.Yaxis)i.push(t.data.length);let e=Math.max(...i),a=0;if(this.data.Yaxis.forEach(t=>{t.data.length>a&&(a=t.data.length)}),t.setting&&t.setting.amountDataDisplayed){let i=t.setting.amountDataDisplayed;if(a>=t.setting.amountDataDisplayed)for(let t=0;t<this.data.Yaxis.length;t++)this.data.Yaxis[t].data=this.data.Yaxis[t].data.slice(e-i,e)}};d(),this.mode=t.type;let g,f,r,x,m,c,_=this.mode,p=.85*i.height-.1*i.height,u=()=>{let t=[];for(let i of this.data.Yaxis)for(let e of i.data)t.push(e);g=Math.max(...t),f=Math.min(...t),x=determine_of_y(f,g)[1],m=determine_of_y(f,g)[0],c=determine_of_y(f,g)[2],h>.8*a?r=f<0?11:10:h>.4*a&&h<=.8*a?r=5:h>.2*a&&h<=.4*a&&(r=f<0?3:4),f<0&&(r-=1)};u();let w=(t,i,a,h)=>{e.fillStyle=a,e.beginPath(),e.arc(t,i,h,0,2*Math.PI,!0),e.fill()},Y=(t,i,a,h)=>{e.beginPath(),e.fillStyle="rgba(220,220,220,0.5)",e.rect(t,i,a,h),e.fill()},y=()=>{let a=!0;if(t.setting&&(a=t.setting.showLabel),this.data.Yaxis.length>1&&a){let a,h;t.title?(a=.5*i.width,h=.5*i.width):(a=.9*i.width,h=.1*i.width);for(let t=0;t<this.data.Yaxis.length;t++){let l=h+a*(t/this.data.Yaxis.length),s=.05*i.height;w(l,s,this.data.Yaxis[t].color,8),w(l,s,"#ffffff",4),e.fillStyle="#111111",e.textAlign="left",e.font="15px Arial",e.fillText(this.data.Yaxis[t].name,l+10,s+5)}}},b=()=>{let t=[.1*i.height-.09*i.height,.1*i.width-.09*i.width];if(this.data.Xaxis){this.longest_of_data=this.data.Xaxis.labels.length;for(let a=0;a<this.longest_of_data;a++){let h;e.beginPath(),"line"==_?h=.1*i.width+s*(a/(this.longest_of_data-1))+o:"bar"==_&&(h=.1*i.width+l*((a+1)/(this.longest_of_data+1))),e.moveTo(h,map(.1*i.height,0,i.height,i.height,0)),e.lineTo(h,map(.1*i.height-Math.min(...t),0,i.height,i.height,0)),e.stroke(),e.fillStyle="rgb(0, 0, 0)",e.textAlign="center",e.font="15px Arial",e.fillText(`${this.data.Xaxis.labels[a]}`,h,map(.05*i.height,0,i.height,i.height,0))}}else{let t=[];for(let i of this.data.Yaxis)t.push(i.data.length);this.longest_of_data=Math.max(...t)}},A=()=>{if("line"==_){(()=>{for(let t of this.data.Yaxis){e.beginPath(),e.lineWidth=2;for(let a=0;a<this.longest_of_data;a++){let h=.1*i.width+s*(a/(this.longest_of_data-1))+o,l=map(.1*i.height+map(t.data[a],m,x,0,p),0,i.height,i.height,0);0==a?e.moveTo(h,l):e.lineTo(h,l)}t.color&&(e.strokeStyle=t.color),e.stroke()}})();for(let t=0;t<this.longest_of_data;t++){let a=.1*i.width+s*(t/(this.longest_of_data-1))+o,h=getMousePos(i),l=s*(1/this.longest_of_data)/2;if(h.x<a+l&&h.x>a-l&&h.y>.1*i.height&&h.y<.9*i.height){for(let e of this.data.Yaxis)if(e.data[t]){let a=.1*i.width+s*(t/(this.longest_of_data-1))+o,h=map(.1*i.height+map(e.data[t],m,x,0,.75*i.height),0,i.height,i.height,0);w(a,h,e.color,10),w(a,h,"#ffffff",5)}let a=.1*i.width+s*(t/(this.longest_of_data-1))+o,h=.35*i.height;t>=.5*this.longest_of_data?a-=.25*i.width:a+=.05*i.width;let l=[];this.data.Yaxis.forEach(i=>{i.data[t]&&l.push(i.data[t])});let n=0;l.forEach(t=>n+=t),n/l.length>.5*c&&(h=.45*i.height),Y(a,h,.2*i.width,20*l.length);let d=[];this.data.Yaxis.forEach(t=>{for(let i=0;i<t.data.length;i++)null==d[i]&&(d[i]=[]),d[i].push(t.data[i])});let g=[];for(let s=0;s<this.data.Yaxis.length;s++)if(this.data.Yaxis[s].data[t]&&g.push(1),e.fillStyle=this.data.Yaxis[s].color,e.textAlign="left",e.font="15px Arial",g.length>0){let o=(g.length-1)/d[t].length;if(this.data.Yaxis[s].data[t]){let n=h+20*l.length*o+15;e.fillText(this.data.Yaxis[s].name,a+.2*i.width*.01,n),e.textAlign="right",e.fillText(this.data.Yaxis[s].data[t],a+.2*i.width-.2*i.width*.01,n)}}}}}else if("bar"==_){let t=[];for(let i of this.data.Yaxis)for(let e=0;e<i.data.length;e++)null==t[e]&&(t[e]=[]),t[e].push(i.data[e]);let a=[],h=(.9*i.width-.1*i.width)*(.6/this.longest_of_data);for(let s=0;s<this.data.Yaxis.length;s++)for(let o=0;o<this.data.Yaxis[s].data.length;o++){null==a[o]&&(a[o]=[]),a[o].push(1);let n,d=h*(1/t[o].length),g=h*((a[o].length-1)/t[o].length),r=.1*i.width+l*((o+1)/(this.longest_of_data+1))+g-.5*h;n=map(f<0?.1*i.height+p/2:.1*i.height,0,i.height,i.height,0),e.fillStyle=this.data.Yaxis[s].color,e.fillRect(r,n,d,-1*map(this.data.Yaxis[s].data[o],0,c,0,.85*i.height-.1*i.height))}}};this.action=(()=>{u(),(()=>{let a="#ffffff";t.setting&&t.setting.backgroundColor&&(a=t.setting.backgroundColor),e.fillStyle=a,e.fillRect(0,0,i.width,i.height)})(),(()=>{if(t.title){e.fillStyle=t.title.color?t.title.color:"#111111",e.textAlign="left";let a=t.title.font_size||`${i.height<i.width?.09*i.height:.09*i.width}px`,h=t.title.font_family||"Arial";e.font=`bolder ${a} ${h}`,e.fillText(t.title.name,.01*i.width,.07*i.height)}})(),y(),b(),(()=>{let t=[.1*i.height-.09*i.height,.1*i.width-.09*i.width];for(let a=0;a<=r;a++){let h=map(c*(a/r)+m,m,x,0,p),l=map(.1*i.height+h,0,i.height,i.height,0),s=c*(a/r)+m;e.strokeStyle="rgb(100, 100, 100)",e.lineWidth=0==s?1:.3,e.beginPath(),e.moveTo(.9*i.width,l),e.lineTo(.1*i.width-Math.min(...t),l),e.stroke(),e.fillStyle="rgb(0, 0, 0)",e.textAlign="right",e.font="15px Arial",e.fillText(s,.1*i.width-Math.min(...t)-1,l+5)}})(),A(),d()}),this.action(),i.addEventListener("mousemove",()=>{this.action()})};
//# sourceMappingURL=/sm/0fd435576f00c6a633d08bf540cde20de407961d08c74356554988ab08f188a3.map
